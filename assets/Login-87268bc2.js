import{_ as y,a as _,r as a,o as u,c as b,b as o,w as i,d as k,e as L,f as c,t as V,g as w,h as d}from"./index-04ea303d.js";const A={components:{},data:()=>({alert_msg:"",alert_type:"",pass_visible:!1,pass_name:"",pass_token:"",isLoading:!1,name_rules:[e=>e?!0:"Name is required"],pass_rules:[e=>e?!0:"Token is required"]}),methods:{async handleLogin(){var t,l,r;const{valid:e}=await this.$refs.form.validate();if(e){this.isLoading=!0;const m={pass_name:this.pass_name,pass_token:this.pass_token};try{const s=await(await _.post("/auth/login-admin",m)).data;s.ok?(this.isLoading=!1,this.alert_type="success",this.alert_msg=s.msg,sessionStorage.setItem("_x__r_a_y__m_u_m_m_y_",s.token),_.defaults.headers.common.Authorization=`Bearer ${sessionStorage.getItem("_x__r_a_y__m_u_m_m_y_")}`,this.$router.push({name:"Admin Operation"})):(this.isLoading=!1,this.alert_type="error",this.alert_msg=s.msg)}catch(s){this.isLoading=!1,s.name=="AxiosError"&&(this.alert_type="error",this.alert_msg=(l=(t=s.response)==null?void 0:t.data)==null?void 0:l.msg,console.log((r=s.response)==null?void 0:r.data)),console.log(s)}}}}},$={class:"py-4"},x=d("div",{class:"text-title text-h4 mb-5"},"Admin Login",-1),N=d("div",{class:"text-subtitle-1 text-medium-emphasis"},"Admin Name",-1),B=d("div",{class:"text-subtitle-1 text-medium-emphasis d-flex align-center justify-space-between"}," Token ",-1);function C(e,t,l,r,m,s){const g=a("v-alert"),p=a("v-text-field"),f=a("v-btn"),h=a("v-form"),v=a("v-card");return u(),b("div",$,[o(v,{class:"mx-auto pa-12 pb-8",elevation:"8","max-width":"448",rounded:"lg"},{default:i(()=>[o(h,{ref:"form",onSubmit:k(s.handleLogin,["prevent"])},{default:i(()=>[x,e.alert_msg?(u(),L(g,{key:0,class:"mb-3 py-1",type:e.alert_type,title:"",variant:"tonal",border:"start","close-label":"Close Alert"},{default:i(()=>[c(V(e.alert_msg),1)]),_:1},8,["type"])):w("",!0),N,o(p,{density:"compact",placeholder:"Admin user name","prepend-inner-icon":"mdi-account-key",variant:"outlined",modelValue:e.pass_name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.pass_name=n),rules:e.name_rules},null,8,["modelValue","rules"]),B,o(p,{modelValue:e.pass_token,"onUpdate:modelValue":t[1]||(t[1]=n=>e.pass_token=n),"append-inner-icon":e.pass_visible?"mdi-eye-off":"mdi-eye",type:e.pass_visible?"text":"password",density:"compact",placeholder:"Enter your token","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",rules:e.pass_rules,"onClick:appendInner":t[2]||(t[2]=n=>e.pass_visible=!e.pass_visible)},null,8,["modelValue","append-inner-icon","type","rules"]),o(f,{block:"",class:"mb-8",color:"blue",size:"large",variant:"tonal",type:"submit",loading:e.isLoading,disabled:e.isLoading},{default:i(()=>[c(" Log In ")]),_:1},8,["loading","disabled"])]),_:1},8,["onSubmit"])]),_:1})])}const I=y(A,[["render",C]]);export{I as default};
